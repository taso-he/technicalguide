{"title":"Good practice tips","markdown":{"yaml":{"title":"Good practice tips"},"headingText":"Tips for effective R scripting","containsRefs":false,"markdown":"\n\nEfficient and clean coding practices are fundamental for effective data analysis and collaboration. This section offers a set of good practice tips tailored for scripting in R.[^1] These guidelines are designed to improve the readability, shareability, and functionality of your code.\n\n[^1]: R and RStudio are two different things. R is a programming language for statistics, and RStudio is a tool that makes R easier to use. It's rare, but someone might have R without RStudio. This guide is written assuming you have both R and RStudio installed.\n\n\n### Structuring the scripts\n\n-   Use commented lines of `-` to help break up the script into readable sections.\n\n-   Load all required packages, then all required files. Only load the packages that are necessary for your script.\n\n``` r\n# Loading libraries and data --------------------------------------------------\n\n# Load libraries (install if needed)\n\nlibrary(tidyverse) \n\n# Load data \n\ndf <- read.csv(\"example_data_vis.csv\")\n\n# Tidying the data ------------------------------------------------------------\n\n# Filter by year\ndf <- df %>% \n  filter(enrollment_year == 2020)\n\n# Separating a full name into first and last name\ndf_separated <- df %>% separate(col = FullName, \n                                into = c(\"FirstName\", \"LastName\"), \n                                sep = \" \")\n```\n\n-   Include a line on who wrote the script, and a line or two on what its purpose is.\n\n``` r\n# Open University Learner Analytics Data (OULAD) ------------------------------\n\n# 1. OULAD loading and cleaning -----------------------------------------------\n\n# Introduction ----------------------------------------------------------------\n\n# Ongoing document written by LA with support from RJS.\n# Analyses the Open University Learner Analytics Dataset.\n# Info on this open dataset and the data can be found here:\n# https://analyse.kmi.open.ac.uk/open_dataset\n```\n\n-   If the script is unwieldy, consider breaking the code up into separate files. As a rule of thumb, a file shouldn't be longer than 2000 lines.\n\n### Coding practices\n\n-   Where possible, use the `tidyverse` rather than Base R. The tidyverse has friendly syntax and is often easier to read than Base R.[^2]\n\n[^2]: There is debate around this. However this discussion is beyond the scope of this guide. All that we need to know for the purposes of this guide is that the tidyverse is a collection of packages designed to work together in data science tasks. It simplifies data manipulation, visualisation and analysis through a consistent syntax and logical workflow. For all things tidyverse, see [R for Data Science](https://r4ds.hadley.nz/).\n\n<!-- -->\n\n-   Comment liberally, explaining what your code is doing and why.\n\n``` r\n# Creating binary deprivation measure\n# Where bottom three deciles are coded as deprived\nstudent_info <- student_info %>%\n  mutate(deprivation_status = case_when(\n    is.na(imd_decile) ~ NA_character_,\n    imd_decile %in% 1:3 ~ \"Deprived\", \n    imd_decile %in% 4:10 ~ \"Not deprived\", \n    TRUE ~ \"ERROR\"\n  ))\n  \n# student_info has more than one row for many students, who are taking more than one module\n# So we can keep unique id_student to perform a lookup \nstudent_info_unique <- student_info %>%\n  distinct(id_student, .keep_all = TRUE)\n```\n\n-   Try to keep the code to 80 characters or less per line for readability.\n\n-   Use `<-` not `=` for assignment.[^3]\n\n[^3]: In R, `<-` assigns values to variables, while `==` tests equality. Using different symbols for assignment and equality makes R code more readable and easier to follow.\n\n```{=html}\n<!-- -->\n```\n-   Try not to repeat yourself - if you're repeating the same code many times, consider using a loop or function, which will save time and decrease the likelihood of making a mistake.\n\n### Organising files and workspace\n\n-   Aim for names (both for files and variables) that are concise and meaningful.\n\n    -   Bad practice:\n        -   `data_analysis_version2_final.R`\n        -   `new_script_updated.R`\n        -   `final_data_03.04.2024.R`\n    -   Good practice:\n        -   `student_performance_analysis.R`\n        -   `course_enrollment_trends.R`\n        -   `faculty_publication_summary.R`\n\n-   If files should be run in a certain order, begin the file name with numbers (e.g. `1_tidy_data`, `2_exploratory_analysis`, `3_model`).\n\n-   It may be helpful to explicitly specify R script or package dependencies clearly.[^4] Use a `DESCRIPTION` file to detail required R packages and their versions. For scripts, consider including a `README` file that mentions all necessary packages and scripts, ensuring users know exactly what they need to run your code smoothly. \n\n[^4]: Dependencies in R are external packages or software your code needs to run, such as `ggplot2` for graphs or `dplyr` for data handling. Listing these packages ensures others can use your code without issues, making it easier to share and reproduce your work across different systems.\n\n-   Try to avoid modifying raw data. If you modify data manually you might make errors, and won't be able to restore the original version. Creating a script that processes the raw data and creates a new version enables you to keep track of all the steps you have taken.\n\n-   Start with a clean environment: do not save the workspace (which is turned on by default).[^5] Go to Tools -\\> 'Global Options', then select 'Never' for 'Save workspace to .RData on exit'.\n\n[^5]: A 'clean environment' means having a fresh workspace where no previous work (like variables or data sets you've created, or libraries you've loaded) is left over. This is crucial for making sure your code runs smoothly and is easy for others to understand. The most straightforward way to achieve a clean environment is by going to the 'Session' menu and selecting 'Restart R'. \n\n![](rprintscreen.png){fig-alt=\"Image of the RStudio 'Options' page, highlighting the 'Workspace' section.\" width=\"60%\" fig-align=\"center\"}\n","srcMarkdownNoYaml":"\n\nEfficient and clean coding practices are fundamental for effective data analysis and collaboration. This section offers a set of good practice tips tailored for scripting in R.[^1] These guidelines are designed to improve the readability, shareability, and functionality of your code.\n\n[^1]: R and RStudio are two different things. R is a programming language for statistics, and RStudio is a tool that makes R easier to use. It's rare, but someone might have R without RStudio. This guide is written assuming you have both R and RStudio installed.\n\n## Tips for effective R scripting\n\n### Structuring the scripts\n\n-   Use commented lines of `-` to help break up the script into readable sections.\n\n-   Load all required packages, then all required files. Only load the packages that are necessary for your script.\n\n``` r\n# Loading libraries and data --------------------------------------------------\n\n# Load libraries (install if needed)\n\nlibrary(tidyverse) \n\n# Load data \n\ndf <- read.csv(\"example_data_vis.csv\")\n\n# Tidying the data ------------------------------------------------------------\n\n# Filter by year\ndf <- df %>% \n  filter(enrollment_year == 2020)\n\n# Separating a full name into first and last name\ndf_separated <- df %>% separate(col = FullName, \n                                into = c(\"FirstName\", \"LastName\"), \n                                sep = \" \")\n```\n\n-   Include a line on who wrote the script, and a line or two on what its purpose is.\n\n``` r\n# Open University Learner Analytics Data (OULAD) ------------------------------\n\n# 1. OULAD loading and cleaning -----------------------------------------------\n\n# Introduction ----------------------------------------------------------------\n\n# Ongoing document written by LA with support from RJS.\n# Analyses the Open University Learner Analytics Dataset.\n# Info on this open dataset and the data can be found here:\n# https://analyse.kmi.open.ac.uk/open_dataset\n```\n\n-   If the script is unwieldy, consider breaking the code up into separate files. As a rule of thumb, a file shouldn't be longer than 2000 lines.\n\n### Coding practices\n\n-   Where possible, use the `tidyverse` rather than Base R. The tidyverse has friendly syntax and is often easier to read than Base R.[^2]\n\n[^2]: There is debate around this. However this discussion is beyond the scope of this guide. All that we need to know for the purposes of this guide is that the tidyverse is a collection of packages designed to work together in data science tasks. It simplifies data manipulation, visualisation and analysis through a consistent syntax and logical workflow. For all things tidyverse, see [R for Data Science](https://r4ds.hadley.nz/).\n\n<!-- -->\n\n-   Comment liberally, explaining what your code is doing and why.\n\n``` r\n# Creating binary deprivation measure\n# Where bottom three deciles are coded as deprived\nstudent_info <- student_info %>%\n  mutate(deprivation_status = case_when(\n    is.na(imd_decile) ~ NA_character_,\n    imd_decile %in% 1:3 ~ \"Deprived\", \n    imd_decile %in% 4:10 ~ \"Not deprived\", \n    TRUE ~ \"ERROR\"\n  ))\n  \n# student_info has more than one row for many students, who are taking more than one module\n# So we can keep unique id_student to perform a lookup \nstudent_info_unique <- student_info %>%\n  distinct(id_student, .keep_all = TRUE)\n```\n\n-   Try to keep the code to 80 characters or less per line for readability.\n\n-   Use `<-` not `=` for assignment.[^3]\n\n[^3]: In R, `<-` assigns values to variables, while `==` tests equality. Using different symbols for assignment and equality makes R code more readable and easier to follow.\n\n```{=html}\n<!-- -->\n```\n-   Try not to repeat yourself - if you're repeating the same code many times, consider using a loop or function, which will save time and decrease the likelihood of making a mistake.\n\n### Organising files and workspace\n\n-   Aim for names (both for files and variables) that are concise and meaningful.\n\n    -   Bad practice:\n        -   `data_analysis_version2_final.R`\n        -   `new_script_updated.R`\n        -   `final_data_03.04.2024.R`\n    -   Good practice:\n        -   `student_performance_analysis.R`\n        -   `course_enrollment_trends.R`\n        -   `faculty_publication_summary.R`\n\n-   If files should be run in a certain order, begin the file name with numbers (e.g. `1_tidy_data`, `2_exploratory_analysis`, `3_model`).\n\n-   It may be helpful to explicitly specify R script or package dependencies clearly.[^4] Use a `DESCRIPTION` file to detail required R packages and their versions. For scripts, consider including a `README` file that mentions all necessary packages and scripts, ensuring users know exactly what they need to run your code smoothly. \n\n[^4]: Dependencies in R are external packages or software your code needs to run, such as `ggplot2` for graphs or `dplyr` for data handling. Listing these packages ensures others can use your code without issues, making it easier to share and reproduce your work across different systems.\n\n-   Try to avoid modifying raw data. If you modify data manually you might make errors, and won't be able to restore the original version. Creating a script that processes the raw data and creates a new version enables you to keep track of all the steps you have taken.\n\n-   Start with a clean environment: do not save the workspace (which is turned on by default).[^5] Go to Tools -\\> 'Global Options', then select 'Never' for 'Save workspace to .RData on exit'.\n\n[^5]: A 'clean environment' means having a fresh workspace where no previous work (like variables or data sets you've created, or libraries you've loaded) is left over. This is crucial for making sure your code runs smoothly and is easy for others to understand. The most straightforward way to achieve a clean environment is by going to the 'Session' menu and selecting 'Restart R'. \n\n![](rprintscreen.png){fig-alt=\"Image of the RStudio 'Options' page, highlighting the 'Workspace' section.\" width=\"60%\" fig-align=\"center\"}\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"toc-depth":4,"output-file":"good_practice.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Show the code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.353","editor":"visual","comments":{"hypothesis":true},"theme":"cosmo","toc-expand":true,"footnotes-hover":true,"grid":{"sidebar-width":"200px","body-width":"1000px","margin-width":"200px"},"title":"Good practice tips"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}